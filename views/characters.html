{{block "characters" .}}
<div class="container">
  <div class="grid">
    {{range .Characters}} {{if .IsLast}}
    <a
      href="/character/{{.Id}}"
      hx-trigger="intersect once, threshold=1"
      hx-target=".grid"
      hx-swap="beforeend"
      hx-select=".grid>a"
      hx-get="/?page={{$.NextPage}}"
      hx-on="revealed: this.removeAttribute('hx-trigger')"
      hx-include=".search-input, form"
    >
      <div class="card">
        <div>
          <img class="card-img" src="{{.Image}}" alt="image of {{.Name}}" />
        </div>
        <div>
          <h2 class="name">{{.Name}}</h2>
          <span class="location">{{.Location.Name}}</span>
        </div>
      </div>
    </a>
    {{else}}
    <a href="/character/{{.Id}}" hx-include=".search-input, form">
      <div class="card">
        <div>
          <img class="card-img" src="{{.Image}}" alt="image of {{.Name}}" />
        </div>
        <div>
          <h2 class="name">{{.Name}}</h2>
          <span class="location">{{.Location.Name}}</span>
        </div>
      </div>
    </a>
    {{end}} {{end}}
  </div>
</div>
{{end}}
